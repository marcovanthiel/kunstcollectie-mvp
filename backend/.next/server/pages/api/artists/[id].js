"use strict";(()=>{var e={};e.id=457,e.ids=[457],e.modules={3524:e=>{e.exports=require("@prisma/client")},7096:e=>{e.exports=require("bcrypt")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4226:(e,t,r)=>{r.r(t),r.d(t,{config:()=>c,default:()=>l,routeModule:()=>p});var n={};r.r(n),r.d(n,{default:()=>u});var a=r(1802),s=r(7153),i=r(6249),o=r(7864),d=r(9823);let handler=async(e,t)=>{let{id:r}=e.query,n=parseInt(r);if(isNaN(n))return t.status(400).json({error:"Ongeldig kunstenaar-ID."});switch(e.method){case"GET":return getArtist(e,t,n);case"PUT":return updateArtist(e,t,n);case"DELETE":return deleteArtist(e,t,n);default:return t.setHeader("Allow",["GET","PUT","DELETE"]),t.status(405).json({error:`Methode ${e.method} niet toegestaan`})}},getArtist=async(e,t,r)=>{try{let e=await o.Z.artist.findUnique({where:{id:r},include:{artworks:{select:{id:!0,title:!0,year:!0,artworkType:{select:{name:!0}}}}}});if(!e)return t.status(404).json({error:"Kunstenaar niet gevonden."});return t.status(200).json(e)}catch(e){return console.error("Error fetching artist:",e),t.status(500).json({error:"Er is een fout opgetreden bij het ophalen van de kunstenaar."})}},updateArtist=async(e,t,r)=>{try{let{name:n,address:a,city:s,country:i,email:d,phone:u,website:l,birthDate:c,deathDate:p,biography:w,portraitUrl:v}=e.body,h=await o.Z.artist.findUnique({where:{id:r}});if(!h)return t.status(404).json({error:"Kunstenaar niet gevonden."});let j={};void 0!==n&&(j.name=n),void 0!==a&&(j.address=a),void 0!==s&&(j.city=s),void 0!==i&&(j.country=i),void 0!==d&&(j.email=d),void 0!==u&&(j.phone=u),void 0!==l&&(j.website=l),void 0!==c&&(j.birthDate=c?new Date(c):null),void 0!==p&&(j.deathDate=p?new Date(p):null),void 0!==w&&(j.biography=w),void 0!==v&&(j.portraitUrl=v);let g=await o.Z.artist.update({where:{id:r},data:j});return t.status(200).json(g)}catch(e){return console.error("Error updating artist:",e),t.status(500).json({error:"Er is een fout opgetreden bij het bijwerken van de kunstenaar."})}},deleteArtist=async(e,t,r)=>{try{let e=await o.Z.artist.findUnique({where:{id:r},include:{_count:{select:{artworks:!0}}}});if(!e)return t.status(404).json({error:"Kunstenaar niet gevonden."});if(e._count.artworks>0)return t.status(400).json({error:"Deze kunstenaar kan niet worden verwijderd omdat er kunstwerken aan gekoppeld zijn.",artworkCount:e._count.artworks});return await o.Z.artist.delete({where:{id:r}}),t.status(200).json({message:"Kunstenaar succesvol verwijderd."})}catch(e){return console.error("Error deleting artist:",e),t.status(500).json({error:"Er is een fout opgetreden bij het verwijderen van de kunstenaar."})}},u=(0,d.fS)(handler),l=(0,i.l)(n,"default"),c=(0,i.l)(n,"config"),p=new a.PagesAPIRouteModule({definition:{kind:s.x.PAGES_API,page:"/api/artists/[id]",pathname:"/api/artists/[id]",bundlePath:"",filename:""},userland:n})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222,896],()=>__webpack_exec__(4226));module.exports=r})();