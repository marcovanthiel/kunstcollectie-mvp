"use strict";(()=>{var e={};e.id=519,e.ids=[519],e.modules={3524:e=>{e.exports=require("@prisma/client")},7096:e=>{e.exports=require("bcrypt")},9344:e=>{e.exports=require("jsonwebtoken")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},2548:(e,t,r)=>{r.r(t),r.d(t,{config:()=>l,default:()=>u,routeModule:()=>p});var o={};r.r(o),r.d(o,{default:()=>c});var n=r(1802),a=r(7153),i=r(6249),s=r(7864),d=r(9823);let handler=async(e,t)=>{let{id:r}=e.query,o=parseInt(r);if(isNaN(o))return t.status(400).json({error:"Ongeldig locatie-ID."});switch(e.method){case"GET":return getLocation(e,t,o);case"PUT":return updateLocation(e,t,o);case"DELETE":return deleteLocation(e,t,o);default:return t.setHeader("Allow",["GET","PUT","DELETE"]),t.status(405).json({error:`Methode ${e.method} niet toegestaan`})}},getLocation=async(e,t,r)=>{try{let e=await s.Z.location.findUnique({where:{id:r},include:{locationType:!0,artworks:{select:{id:!0,title:!0,year:!0,artist:{select:{id:!0,name:!0}},artworkType:{select:{id:!0,name:!0}}}}}});if(!e)return t.status(404).json({error:"Locatie niet gevonden."});return t.status(200).json(e)}catch(e){return console.error("Error fetching location:",e),t.status(500).json({error:"Er is een fout opgetreden bij het ophalen van de locatie."})}},updateLocation=async(e,t,r)=>{try{let{name:o,address:n,postalCode:a,city:i,country:d,typeId:c,notes:u}=e.body,l=await s.Z.location.findUnique({where:{id:r}});if(!l)return t.status(404).json({error:"Locatie niet gevonden."});let p={};void 0!==o&&(p.name=o),void 0!==n&&(p.address=n),void 0!==a&&(p.postalCode=a),void 0!==i&&(p.city=i),void 0!==d&&(p.country=d),void 0!==c&&(p.typeId=parseInt(c)),void 0!==u&&(p.notes=u);let w=await s.Z.location.update({where:{id:r},data:p,include:{locationType:!0}});return t.status(200).json(w)}catch(e){return console.error("Error updating location:",e),t.status(500).json({error:"Er is een fout opgetreden bij het bijwerken van de locatie."})}},deleteLocation=async(e,t,r)=>{try{let e=await s.Z.location.findUnique({where:{id:r},include:{_count:{select:{artworks:!0}}}});if(!e)return t.status(404).json({error:"Locatie niet gevonden."});if(e._count.artworks>0)return t.status(400).json({error:"Deze locatie kan niet worden verwijderd omdat er kunstwerken aan gekoppeld zijn.",artworkCount:e._count.artworks});return await s.Z.location.delete({where:{id:r}}),t.status(200).json({message:"Locatie succesvol verwijderd."})}catch(e){return console.error("Error deleting location:",e),t.status(500).json({error:"Er is een fout opgetreden bij het verwijderen van de locatie."})}},c=(0,d.fS)(handler),u=(0,i.l)(o,"default"),l=(0,i.l)(o,"config"),p=new n.PagesAPIRouteModule({definition:{kind:a.x.PAGES_API,page:"/api/locations/[id]",pathname:"/api/locations/[id]",bundlePath:"",filename:""},userland:o})}};var t=require("../../../webpack-api-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[222,896],()=>__webpack_exec__(2548));module.exports=r})();